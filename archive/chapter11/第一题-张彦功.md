# 题目1

导致系统不可用的原因有哪些？保障系统稳定高可用的方案有哪些？请分别列举并简述。

# 解答
## 导致系统不可用的原因

1. 需求实现有 bug，走到逻辑时，程序崩溃。最容易发现，修复bug即可
2. 调用方没按约定传参
   1. 防御性编程，处理前先校验参数，若有问题立即返回“参数错误”影响
   2. 批量接口限制一次请求的数量上限
3. 性能问题
   1. 内存泄露，导致运行一段时间，内存不够用
   2. 并发问题，使用临界区资源没有加锁
4. 调用方流量过大
   1. 资源没有隔离，一个调用方占用了过多的资源

## 保障系统稳定高可用的方案

1. 限流：流量超过服务承受的上限，拒掉一部分的流量
2. 熔断：调用下游服务失败超过一定次数，不再调用。定期检查下游服务是否恢复，再继续请求
3. 降级：不调用非核心服务，资源给核心服务用
4. 服务无状态：容器化部署，方便快速（自动）扩容
5. 数据存储高可用：MySQL、Redis、Kafka等集群部署，消除单点
6. 冗余：同城双活，两地三中心
7. 日志：集中的日志收集，方便定位问题
8. 追踪：分布式 tracing 系统，方便定位问题
9. 监控：性能、业务指标监控